<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta charset="UTF-8" content="text/html"/>
    <meta charset="UTF-8" content="text/javascript"/>
    <meta charset="UTF-8" content="text/html"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


    <script type="text/javascript">
        var xhr = new XMLHttpRequest();
        var ENTRIES_URL = '/entries';
        var REPORT_URL = '/report';

        function init() {
            xhr.open('GET', ENTRIES_URL, true);
            xhr.send();
            setStatus("Loading...");
        }

        xhr.onreadystatechange = function () {
            if (xhr.readyState != 4) return;
            if (xhr.status != 200) {
                setStatus("Something happened. Error code: " + xhr.status);
            }
            else {
                setStatus("");
                handleResponse(xhr.responseText);
            }
        };

        function handleResponse(response) {
            var entries = JSON.parse(response);
            entries.forEach(function (entrie) {
                addRow(entrie.date, entrie.time, entrie.value, entrie.unit);
            })
        }

        function addRow(date, time, value, unit) {
            var table = document.getElementById('entries');
            var row = table.insertRow();
            row.insertCell(0).innerText = date;
            row.insertCell(1).innerText = time;
            row.insertCell(2).innerText = value;
            row.insertCell(3).innerText = unit;
        }

        function setStatus(text) {
            try {
                document.getElementById("status").innerText = text;
            } catch (e) {
                console.log("Error : " + e.name);
            }
        }

        function downloadReport() {
            window.location.assign(REPORT_URL);
        }
    </script>


    <title>
        Data-logger
    </title>
</head>

<body onload="init();">

<div class="container">
    <h2 id="status"></h2>
    <button type="button" class="btn btn-default" onclick="downloadReport()">Export in XLSX-file</button>
    <div class="table-responsive">
        <table class="table" id="entries">
            <thead>
            <tr>
                <th>Date</th>
                <th>Time</th>
                <th>Value</th>
                <th>Unit</th>
            </tr>
            </thead>
        </table>
    </div>
</div>

</body>
</html>